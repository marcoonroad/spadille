'use strict';function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step('next',value)},function(err){step('throw',err)})}}return step('next')})}}const hmac=require('../hmac');const cycle=function cycle(number,minimum,maximum){const limit=maximum+1-minimum;return minimum+number%limit};const intXor=function intXor(left,right){return left^right};const fromHex=function fromHex(hex){return Number.parseInt(hex,16)};const toHex=function toHex(number){return number.toString(16)};const generatePiece=(()=>{var _ref=_asyncToGenerator(function*(hash,suffix){const image=yield hmac.sign(hash,suffix.toString());const subPieces=[];for(let index=0;index<64;index+=1){subPieces.push(fromHex(image.substr(index*8,8)))}return toHex(subPieces.reduce(intXor))});return function generatePiece(_x,_x2){return _ref.apply(this,arguments)}})();const computeNumber=function computeNumber(randomGen,data){return randomGen(Math.abs(fromHex(data)))};const splitInPieces=(()=>{var _ref2=_asyncToGenerator(function*(text){const stream={index:-1,text:text,generate:function generate(){this.index+=1;return generatePiece(this.text,this.index)}};return stream});return function splitInPieces(_x3){return _ref2.apply(this,arguments)}})();const makeRandomGen=function makeRandomGen(minimum,maximum){return function(seed){return cycle(seed,minimum,maximum)}};const missing=function missing(value){return value===undefined||value===null};const option=function option(value,defaultValue){return missing(value)?defaultValue:value};const sortOrder=function sortOrder(x,y){return x>y?1:x<y?-1:0};const sortArrayNumber=function sortArrayNumber(array){return array.sort(sortOrder)};module.exports.cycle=cycle;module.exports.splitInPieces=splitInPieces;module.exports.fromHex=fromHex;module.exports.makeRandomGen=makeRandomGen;module.exports.missing=missing;module.exports.option=option;module.exports.sortArrayNumber=sortArrayNumber;module.exports.computeNumber=computeNumber;